<!DOCTYPE html>
<html>

<head>
    <title>Javalin Sohbet Uygulaması</title>
    <style>
        #chatbox {
            width: 400px;
            height: 300px;
            overflow-y: scroll;
            border: 1px solid #ccc;
            padding: 10px;
        }

        #message {
            width: 300px;
            padding: 5px;
        }
    </style>
</head>

<body>
    <h2>Javalin Sohbet</h2>
    <label for="username">Name:</label>
    <input type="text" id="username">
    <button onclick="connect()">Connect</button>

    <div id="chatbox"></div>
    <input type="text" id="message">
    <button onclick="sendMessage()">Send</button>

    <script>
        let websocket;

        function connect() {
            let username = document.getElementById("username").value;
            websocket = new WebSocket("http://192.168.1.106:7070/chat"); // Javalin portunuzu ayarlayın

            websocket.onopen = function () {
                websocket.send(username); // İlk mesaj olarak ismi gönder
            };

            websocket.onmessage = function (event) {
                let chatbox = document.getElementById("chatbox");
                chatbox.innerHTML = event.data;
                chatbox.scrollTop = chatbox.scrollHeight; // Otomatik aşağı kaydır
            };
        }

        function sendMessage() {
            let username = document.getElementById("username").value;
            let message = document.getElementById("message").value;
            websocket.send(username + ": " + message);
            document.getElementById("message").value = "";
        }

        function updateChatbox() {
            websocket.send("connect");
        }

        setInterval(updateChatbox, 2000);
    </script>
</body>

</html>